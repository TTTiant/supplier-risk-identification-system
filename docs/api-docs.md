
## 接口文档：供应商风控系统

### 1. 接口概述

该文档列出了供应商风控系统的相关 API 接口，包括查询供应商风险信息、获取历史风险标签等。文档结构如下：

- [查询供应商风险信息](#查询供应商风险信息)
- [获取供应商风险标签历史](#获取供应商风险标签历史)
- [刷新风险规则](#刷新风险规则)

### 2. 查询供应商风险信息

#### 接口说明

根据供应商的统一社会信用代码（Supplier Credit Code）查询其当前风险标签。

#### 请求方式

`GET /api/v1/risk/check`

#### 请求参数

| 参数名               | 类型   | 是否必填 | 描述                     |
|----------------------|--------|----------|--------------------------|
| supplierCreditCode   | string | 是       | 供应商统一社会信用代码   |

#### 响应参数

| 字段名             | 类型     | 描述                          |
|--------------------|----------|-------------------------------|
| supplierId         | long     | 内部供应商ID（主键）          |
| supplierName       | string   | 供应商名称                    |
| supplierCreditCode | string   | 社会信用代码                  |
| riskLabels         | array    | 风险标签数组                  |
| updateTime         | datetime | 本次风险标签更新时间          |

#### 风险标签结构

| 字段名     | 类型   | 描述                   |
|------------|--------|------------------------|
| label      | string | 风险标签名称（如“黑名单”） |
| level      | string | 风险等级（如P0、P1）     |
| detail     | string | 风险描述说明            |

#### 响应示例

```json
{
  "supplierId": 123456,
  "supplierName": "北京某某科技有限公司",
  "supplierCreditCode": "91310000MA1K4XXXXG",
  "riskLabels": [
    {
      "label": "经营异常",
      "level": "P0",
      "detail": "该公司状态为：吊销"
    },
    {
      "label": "黑名单",
      "level": "P0",
      "detail": "集采系统显示该公司为黑名单供应商"
    }
  ],
  "updateTime": "2025-03-31T10:15:00"
}
```

#### 错误码

| 错误码 | 含义                         | 是否建议重试 |
|--------|------------------------------|--------------|
| 4001   | 参数缺失或格式错误            | 否           |
| 5001   | 外部接口调用失败（天眼查）    | 是           |
| 5002   | 外部接口限流（集采）          | 是           |
| 5000   | 系统内部错误                  | 否           |

---

### 3. 获取供应商风险标签历史

#### 接口说明

获取某一供应商的历史风险标签记录。

#### 请求方式

`GET /api/v1/risk/history`

#### 请求参数

| 参数名       | 类型   | 是否必填 | 描述         |
|--------------|--------|----------|--------------|
| supplierId   | int    | 是       | 供应商ID     |

#### 响应示例

```json
{
  "history": [
    {
      "scan_time": "2025-03-25T10:00:00",
      "labels": [
        { "label": "经营异常", "level": "P0", "detail": "吊销" }
      ]
    },
    {
      "scan_time": "2025-03-15T10:00:00",
      "labels": [
        { "label": "黑名单", "level": "P0", "detail": "法律诉讼" }
      ]
    }
  ]
}
```

---

### 4. 刷新风险规则（运维使用）

#### 接口说明

重新加载风险规则配置，用于支持策略更新。

#### 请求方式

`POST /api/v1/risk/rules/reload`

#### 请求参数

无

#### 响应示例

```json
{
  "status": "ok"
}
```

---

### 5. 异常处理说明

- **外部 API 失败时**：系统默认返回本地缓存数据，并记录告警。
- **高风险规则命中时**：系统自动返回特批审批建议，供后续处理。

---

### 6. 版本更新记录

| 版本   | 更新内容       | 日期       |
|--------|----------------|------------|
| 1.0.0  | 初版文档发布   | 2025-03-31 |

---

### 文件结构建议

你可以将这份文档保存为 `api-docs.md` 文件，放在项目的 `/docs` 或 `/src/main/resources/docs/` 目录下。

### 参考

如果你的团队使用 API 文档生成工具（例如 Swagger 或 Postman），你还可以根据上述格式在这些工具中进行导入并生成更丰富的文档界面。

---
