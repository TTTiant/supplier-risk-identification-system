
---

## 天眼查/集采 Mock 接口设计

### 1. 天眼查 Mock 接口设计

#### 接口说明

天眼查是一个提供企业风险查询服务的外部系统，主要用于查询企业的经营状态、法人信息等内容。以下是模拟的天眼查接口设计。

#### Mock 接口

**接口名称**：查询企业风险信息  
**接口地址**：`GET /api/mock/tianyancha/risk-info`

#### 请求参数

| 参数名              | 类型   | 是否必填 | 描述                             |
|---------------------|--------|----------|----------------------------------|
| supplierCreditCode  | string | 是       | 企业的统一社会信用代码（或工商注册号） |

#### 响应示例

```json
{
  "status": "success",
  "data": {
    "supplierCreditCode": "91310000MA1K4XXXXG",
    "companyName": "北京某某科技有限公司",
    "companyStatus": "吊销",
    "legalRepresentative": "张三",
    "registrationDate": "2018-01-01",
    "riskType": "经营异常",
    "riskDetail": "吊销",
    "riskLevel": "P0"
  }
}
```

#### 错误码

| 错误码 | 含义                     | 是否建议重试 |
|--------|--------------------------|--------------|
| 4001   | 参数缺失或格式错误        | 否           |
| 5001   | 天眼查 API 请求失败       | 是           |
| 5002   | 数据库连接失败            | 是           |

---

### 2. 集采 Mock 接口设计

#### 接口说明

集采（集中采购）是另一个外部系统，主要用于提供企业是否在黑名单等风险信息的查询。以下是模拟的集采接口设计。

#### Mock 接口

**接口名称**：查询供应商黑名单信息  
**接口地址**：`GET /api/mock/jicai/blacklist`

#### 请求参数

| 参数名              | 类型   | 是否必填 | 描述                             |
|---------------------|--------|----------|----------------------------------|
| supplierCreditCode  | string | 是       | 企业的统一社会信用代码（或工商注册号） |

#### 响应示例

```json
{
  "status": "success",
  "data": {
    "supplierCreditCode": "91310000MA1K4XXXXG",
    "companyName": "北京某某科技有限公司",
    "blacklistStatus": "是",
    "blacklistReason": "法律诉讼",
    "riskLevel": "P0"
  }
}
```

#### 错误码

| 错误码 | 含义                     | 是否建议重试 |
|--------|--------------------------|--------------|
| 4001   | 参数缺失或格式错误        | 否           |
| 5001   | 集采 API 请求失败         | 是           |
| 5002   | 请求超时                   | 是           |

---

### 3. Mock 接口的使用说明

1. **集成到开发环境中**：  
   在开发阶段，可以将这些 Mock 接口作为占位符使用，模拟外部系统的响应数据，确保开发过程中不受实际系统不可用的影响。

2. **Mock 数据**：  
   Mock 数据的内容要根据真实外部系统的接口响应进行调整，确保数据结构一致。随着系统接入，数据会变成动态获取的内容。

3. **错误处理与重试**：
    - 在接口请求失败时，系统应该能够从本地缓存中获取之前的数据（如果存在）。
    - 当外部接口返回错误码（如 5001、5002）时，建议进行重试处理，尤其是对于 5001 错误，可以设置重试次数和间隔。

4. **测试用例**：
    - 测试时模拟企业的经营状态异常、黑名单状态等数据，确保风险引擎能准确识别。
    - 测试不同的错误码和超时处理机制，确保系统能够稳定应对异常。

---

### 4. 集成与扩展

- **数据同步**：在真正的集成过程中，Mock 数据需要替换为真实的外部接口调用。使用 API 网关或其他集成中间层进行数据同步，确保信息的实时性。
- **接口优化**：在实际集成过程中，考虑接口的限流、并发控制、缓存策略等，确保系统稳定运行。

---

### 5. 其他注意事项

1. **接口限流**：  
   在实际接入天眼查和集采时，需要考虑外部接口的限流机制。如果接口有频率限制（如每秒调用次数），需要在系统中实现接口调用的限流、重试等策略。

2. **认证与鉴权**：  
   若天眼查和集采的 API 需要认证（如 API 密钥、OAuth 认证等），在 Mock 接口中模拟相应的请求头和身份验证过程。

3. **数据更新频率**：  
   外部系统数据可能会随时变化，因此可以考虑对接口进行缓存，减少频繁的外部请求，提升系统效率。

---

### 总结

这个文档提供了天眼查和集采的 Mock 接口设计，帮助你模拟与外部系统的集成，确保开发、测试和部署过程的顺利进行。在后期集成真实的天眼查和集采接口时，只需要替换 Mock 接口地址，确保数据源的一致性。

